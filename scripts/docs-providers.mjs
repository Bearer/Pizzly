import fs from 'node:fs';
import yaml from 'js-yaml';

const providersPath = 'packages/shared/providers.yaml';
const providersMdxPath = 'docs-v2/snippets/providers.mdx';

if (!fs.existsSync(providersPath)) {
    console.error(`Providers file not found: ${providersPath}`);
    process.exit(1);
}

const providers = yaml.load(fs.readFileSync(providersPath, 'utf-8'));

fs.writeFileSync(
    providersMdxPath,
    `// generated by scripts/docs-providers.mjs. do not update\nexport const providers = ${JSON.stringify(providers, null, 4)}`,
    'utf-8'
);
